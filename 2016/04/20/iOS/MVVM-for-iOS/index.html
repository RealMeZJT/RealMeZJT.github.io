<!doctype html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS,MVVM," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="å¦‚æœä½ æ¥è§¦è¿‡ç§»åŠ¨åº”ç”¨å¼€å‘ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å·²ç»å¬è¯´è¿‡ Model-View-Controller(ç®€ç§°MVC)ã€‚MVCæ˜¯ä¸€ç§ç›¸å½“ä¼ ç»Ÿã€ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼ŒAppleå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨è¿™ç§æ¨¡å¼å¼€å‘iOSåº”ç”¨ã€‚åœ¨MVCä¸‹ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½è¢«åˆ†ä¸º3å¤§ç±»ï¼š

æŒæœ‰æ•°æ®çš„Model;
æ˜¾ç¤ºç”¨æˆ·ç•Œé¢çš„View;
Viewå’ŒModelé€šè®¯çš„æ¡¥æ¢:controller;

Viewå’ŒModelä¹‹é—´ä¸ä¼šç›´æ¥çš„ç›¸äº’å¼•ç”¨ï¼Œå®ƒä»¬ä¹‹é—´çš„æ²Ÿé€š">
<meta property="og:type" content="article">
<meta property="og:title" content="MVVM for iOS">
<meta property="og:url" content="http://yoursite.com/2016/04/20/iOS/MVVM-for-iOS/index.html">
<meta property="og:site_name" content="ZhouJiatao's Blog">
<meta property="og:description" content="å¦‚æœä½ æ¥è§¦è¿‡ç§»åŠ¨åº”ç”¨å¼€å‘ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å·²ç»å¬è¯´è¿‡ Model-View-Controller(ç®€ç§°MVC)ã€‚MVCæ˜¯ä¸€ç§ç›¸å½“ä¼ ç»Ÿã€ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼ŒAppleå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨è¿™ç§æ¨¡å¼å¼€å‘iOSåº”ç”¨ã€‚åœ¨MVCä¸‹ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½è¢«åˆ†ä¸º3å¤§ç±»ï¼š

æŒæœ‰æ•°æ®çš„Model;
æ˜¾ç¤ºç”¨æˆ·ç•Œé¢çš„View;
Viewå’ŒModelé€šè®¯çš„æ¡¥æ¢:controller;

Viewå’ŒModelä¹‹é—´ä¸ä¼šç›´æ¥çš„ç›¸äº’å¼•ç”¨ï¼Œå®ƒä»¬ä¹‹é—´çš„æ²Ÿé€š">
<meta property="og:image" content="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Art/model_view_controller_2x.png">
<meta property="og:image" content="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23model_view_controller_2x.png">
<meta property="og:image" content="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23view_connected_controller.png">
<meta property="og:image" content="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23MVVM.png">
<meta property="og:updated_time" content="2017-01-13T04:46:12.189Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MVVM for iOS">
<meta name="twitter:description" content="å¦‚æœä½ æ¥è§¦è¿‡ç§»åŠ¨åº”ç”¨å¼€å‘ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å·²ç»å¬è¯´è¿‡ Model-View-Controller(ç®€ç§°MVC)ã€‚MVCæ˜¯ä¸€ç§ç›¸å½“ä¼ ç»Ÿã€ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼ŒAppleå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨è¿™ç§æ¨¡å¼å¼€å‘iOSåº”ç”¨ã€‚åœ¨MVCä¸‹ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½è¢«åˆ†ä¸º3å¤§ç±»ï¼š

æŒæœ‰æ•°æ®çš„Model;
æ˜¾ç¤ºç”¨æˆ·ç•Œé¢çš„View;
Viewå’ŒModelé€šè®¯çš„æ¡¥æ¢:controller;

Viewå’ŒModelä¹‹é—´ä¸ä¼šç›´æ¥çš„ç›¸äº’å¼•ç”¨ï¼Œå®ƒä»¬ä¹‹é—´çš„æ²Ÿé€š">
<meta name="twitter:image" content="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Art/model_view_controller_2x.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/04/20/iOS/MVVM-for-iOS/"/>





  <title> MVVM for iOS | ZhouJiatao's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ZhouJiatao's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/20/iOS/MVVM-for-iOS/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="ZhouJiatao">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhouJiatao's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhouJiatao's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                MVVM for iOS
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">VerÃ¶ffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-20T14:30:28+00:00">
                2016-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Other/" itemprop="url" rel="index">
                    <span itemprop="name">Other</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>å¦‚æœä½ æ¥è§¦è¿‡ç§»åŠ¨åº”ç”¨å¼€å‘ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å·²ç»å¬è¯´è¿‡ <code>Model-View-Controller</code>(ç®€ç§°MVC)ã€‚<br>MVCæ˜¯ä¸€ç§ç›¸å½“ä¼ ç»Ÿã€ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼Œ<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html" target="_blank" rel="external">Apple</a>å®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨è¿™ç§æ¨¡å¼å¼€å‘iOSåº”ç”¨ã€‚<br>åœ¨MVCä¸‹ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½è¢«åˆ†ä¸º3å¤§ç±»ï¼š</p>
<ol>
<li>æŒæœ‰æ•°æ®çš„<code>Model</code>;</li>
<li>æ˜¾ç¤ºç”¨æˆ·ç•Œé¢çš„<code>View</code>;</li>
<li>Viewå’ŒModelé€šè®¯çš„æ¡¥æ¢:<code>controller</code>;<br><img src="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Art/model_view_controller_2x.png" alt="mvc diagram"></li>
</ol>
<p>Viewå’ŒModelä¹‹é—´ä¸ä¼šç›´æ¥çš„ç›¸äº’å¼•ç”¨ï¼Œå®ƒä»¬ä¹‹é—´çš„æ²Ÿé€šæ˜¯é€šè¿‡controlleræ¥åè°ƒçš„ã€‚ç”¨æˆ·å¯¹ç•Œé¢Viewè¿›è¡Œäº†æ“ä½œï¼ŒViewå°±ä¼šé€šçŸ¥Controlleræ›´æ–°Modelçš„çŠ¶æ€ï¼›Modelçš„çŠ¶æ€æ”¹å˜ï¼Œä¼šé€šçŸ¥controllerå»æ›´æ–°ç•Œé¢Viewã€‚</p>
<a id="more"></a>
<h2 id="åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ"><a href="#åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ" class="headerlink" title="åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ"></a>åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ</h2><p>Model: é€šå¸¸éå¸¸è½»é‡ç®€å•ï¼Œæ˜¯ä½ è‡ªå·±å®šä¹‰çš„ç±»æˆ–è€…ç»“æ„ä½“ï¼Œæ¯”å¦‚ä¸€ä¸ªæ‹¥æœ‰å§“åå’Œç”µè¯å·ç ç­‰æ•°æ®çš„Personç±»ã€‚</p>
<p>View: UIKitä¸­çš„ç»„ä»¶ï¼Œæˆ–è€…æ˜¯ä½ è‡ªå®šä¹‰çš„ç»§æ‰¿äºUIViewçš„ç±»ï¼Œæ¯”å¦‚UIButtonï¼ŒUILabelã€‚ä½ å¯èƒ½ä¼šæŠŠå®ƒä»¬æ”¾åœ¨ .xib æˆ–è€… Storyboard æ–‡ä»¶ä¸­ã€‚</p>
<p>controller: å‡ ä¹ç­‰åŒäºè§†å›¾æ§åˆ¶å™¨(View Controller)ï¼Œé€šå¸¸æ˜¯UIViewControlleræˆ–è€…å®ƒçš„å­ç±»ã€‚UIviewControllerå°±åƒä¸€ä¸ªç¹å¿™çš„å·¥åœºã€‚æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸçš„å®ƒä¸ä»…è´Ÿè´£Modelå’ŒViewçš„äº¤äº’ï¼Œè¿˜è´Ÿè´£äº†è§†å›¾çš„loading,appearing,disappearingç­‰ã€‚</p>
<p><img src="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23model_view_controller_2x.png" alt="model-view-viewcontroller"></p>
<h2 id="Massive-View-Controller"><a href="#Massive-View-Controller" class="headerlink" title="Massive View Controller"></a>Massive View Controller</h2><p>ä¸€ä¸ªView Controllerï¼Œå¾€å¾€åŒ…å«äº†è®¸å¤šçš„IBOutletå±æ€§ï¼Œå¹¶ä¸”å®ç°äº†å¤šä¸ªprotocolçš„å“åº”æ–¹æ³•,è¿™è¶³ä»¥è®©View Controllerå˜å¾—è‡ƒè‚¿ã€‚é›ªä¸ŠåŠ éœœçš„æ˜¯ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ è¿˜èƒ½å‘ç°ä¸šåŠ¡é€»è¾‘å’Œmodelå±‚çš„æ•°æ®å¤„ç†é€»è¾‘æ··æ‚å…¶ä¸­ã€‚<br>å¦‚æœæœ‰äººå‘Šè¯‰ä½ ï¼Œä»–åœ¨ä¸€ä¸ªView Controllerä¸­çœ‹åˆ°äº†ä¸Šåƒè¡Œçš„ä»£ç ï¼Œæˆ‘æƒ³ä½ å¹¶ä¸ä¼šä¸ºæ­¤æ„Ÿåˆ°æƒŠè®¶ã€‚<br>å› æ­¤æœ‰äººè°ƒä¾ƒiOSæ¶æ„ä¸­çš„MVCæ˜¯<strong>Massive View Controller</strong>çš„æ„æ€ã€‚</p>
<p>ä¸€ä¸ªä½“ç§¯åºå¤§çš„è§†å›¾æ§åˆ¶å™¨ï¼Œå®ƒæ‰€å¸¦æ¥çš„å¼Šç«¯æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå°±æ˜¯éš¾ä»¥ç»´æŠ¤ï¼Œä¹Ÿéš¾ä»¥å†™å•å…ƒæµ‹è¯•ã€‚ç›¸ä¿¡æœ‰ä¸å°‘äººå·²ç»æ”¾å¼ƒå¯¹View Controllerå†™å•å…ƒæµ‹è¯•äº†ã€‚</p>
<p>åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½åœ¨å°½å¯èƒ½çš„å°†ä»£ç ä»View Controllerä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥ä¿æŒå®ƒçš„ç®€æ´ã€‚æœ‰æ—¶å€™ï¼Œä»£ç æ˜¯å°‘äº†ï¼Œä½†ä»ä¸èƒ½ä½¿å¾—View Controllerçš„ç»“æ„æ¸…æ™°ã€‚å—é™äºç”Ÿå‘½å‘¨æœŸå’ŒViewsçš„å›è°ƒæ–¹æ³•ï¼Œæœ‰æ—¶å€™åŒä¸€ä¸ªæ“ä½œåœ¨å¥½å‡ ä¸ªåœ°æ–¹éƒ½éœ€è¦è°ƒç”¨ã€‚</p>
<p>æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬å¯¹ä¸€ä¸ªå±æ€§(name)èµ‹å€¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®©View Controlleræ›´æ–°å¯¹åº”çš„è§†å›¾,å› æ­¤æˆ‘ä»¬åœ¨è¯¥å±æ€§(name)çš„setæ–¹æ³•ä¸­è°ƒç”¨æ›´æ–°è§†å›¾çš„æ–¹æ³•updateUI()ã€‚</p>
<pre><code>- (void)setName:(NSString *)name {
    _name = name;
    [self updateUI];
}
</code></pre><p>ä½†å¦‚æœèµ‹å€¼æ“ä½œæ˜¯åœ¨è§†å›¾åŠ è½½å®Œæˆä¹‹å‰è¿›è¡Œçš„å‘¢ï¼Ÿæœ€åï¼Œæˆ‘ä»¬ä¸å¾—ä¸è¿™ä¹ˆåšï¼Œåœ¨setæ–¹æ³•ä¸­åˆ¤æ–­è§†å›¾åŠ è½½å®Œæ¯•çš„æƒ…å†µä¸‹ï¼Œæ‰è°ƒç”¨updateUI()ï¼Œæ¥ç€åœ¨viewDidLoadæ–¹æ³•å†…ä¹Ÿè¡¥å……è°ƒç”¨updateUI()ã€‚</p>
<pre><code>- (void)viewDidLoad {
    [super viewDidLoad];
    [self updateUI];
}

- (void)setName:(NSString *)name {
    _name = name;
    if (self.view.window) {
        [self updateUI];
    }
}
</code></pre><p>MVCå¸¦æ¥çš„å¥½å¤„å·²ç»éå¸¸å¤šäº†ï¼Œä½†æˆ‘ä»¬ä¸æ»¡è¶³äºæ­¤ã€‚</p>
<h2 id="Model-View-ViewModel"><a href="#Model-View-ViewModel" class="headerlink" title="Model-View-ViewModel"></a>Model-View-ViewModel</h2><p>åœ¨å®è·µä¸­å‘ç°ï¼ŒViewså’Œå®ƒå¯¹åº”çš„View Controlleræ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œå¦‚æ­¤ç´§å¯†çš„è€¦åˆï¼Œæˆ‘ä»¬ä¸å¦¨å°†å®ƒä»¬çœ‹æˆåŒä¸€ä¸ªç»„ä»¶ã€‚<br><img src="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23view_connected_controller.png" alt="view_connected_controller"></p>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªæƒ³æ³•è¯ç”Ÿäº†ğŸ˜„â€¦</p>
<p><img src="http://7xr5jb.com1.z0.glb.clouddn.com/MVVM%23MVVM.png" alt="mvvm"></p>
<p>(MVVMæ˜¯å¾®è½¯çš„ä¸€ä½æ¶æ„å¸ˆJohn Gossmanæå‡ºçš„ï¼Œå…·ä½“å†å²è¯·å‚é˜…<a href="https://en.wikipedia.org/wiki/Modelâ€“viewâ€“viewmodel" target="_blank" rel="external">è¿™é‡Œ</a>)<br>åœ¨MVVMä¸‹ï¼ŒView Controllerä¸å†å¼•ç”¨Modelï¼Œè€Œæ˜¯å¼•ç”¨åˆ°View Modelã€‚</p>
<p>åƒæœ‰äº›ä»£ç ï¼Œæ˜¯ä¸ºäº†æŠŠModelçš„æ•°æ®è½¬æ¢æˆViewèƒ½å±•ç¤ºçš„å€¼ï¼Œæˆ‘ä»¬ç§°è¿™äº›ä»£ç ä¸ºâ€œå±•ç¤ºé€»è¾‘â€ã€‚<br>View Modelå°±æ˜¯å­˜æ”¾â€å±•ç¤ºé€»è¾‘â€çš„å¥½åœ°æ–¹ã€‚éªŒè¯ç”¨æˆ·è¾“å…¥ã€ç½‘ç»œè¯·æ±‚ ç­‰éƒ½å¯ä»¥æ”¾åœ¨View Modelå±‚ã€‚<br>ä½†å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œä¸è¦å¼•ç”¨ä»»ä½•Viewã€‚ä¸¥æ ¼æ¥è¯´ï¼Œåœ¨View Modelä¸­ä¸è¯¥ <code>#import UIKit.h</code>ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ç¤ºä¾‹(From <a href="https://www.objc.io/issues/13-architecture/mvvm/" target="_blank" rel="external">Ash Furrow</a>)ï¼š</p>
<p>Modelå±‚æœ‰ä¸ªPerson:</p>
<pre><code>@interface Person : NSObject

- (instancetype)initwithSalutation:(NSString *)salutation firstName:(NSString *)firstName lastName:(NSString *)lastName birthdate:(NSDate *)birthdate;

@property (nonatomic, readonly) NSString *salutation;
@property (nonatomic, readonly) NSString *firstName;
@property (nonatomic, readonly) NSString *lastName;
@property (nonatomic, readonly) NSDate *birthdate;

@end
</code></pre><p>æœ‰ä¸€ä¸ªPersonViewControllerï¼Œåœ¨<code>viewDidLoad</code>ä¸­æ ¹æ®modelçš„å±æ€§è®¾ç½®labelã€‚</p>
<pre><code>- (void)viewDidLoad {
    [super viewDidLoad];

    if (self.model.salutation.length &gt; 0) {
        self.nameLabel.text = [NSString stringWithFormat:@&quot;%@ %@ %@&quot;, self.model.salutation, self.model.firstName, self.model.lastName];
    } else {
        self.nameLabel.text = [NSString stringWithFormat:@&quot;%@ %@&quot;, self.model.firstName, self.model.lastName];
    }

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@&quot;EEEE MMMM d, yyyy&quot;];
    self.birthdateLabel.text = [dateFormatter stringFromDate:model.birthdate];
}
</code></pre><p>è¿™å°±æ˜¯åœ¨MVCæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸æ‰€åšçš„ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åŠ å…¥View Modelåä¼šå¦‚ä½•ï¼š</p>
<pre><code>@interface PersonViewModel : NSObject

- (instancetype)initWithPerson:(Person *)person;

@property (nonatomic, readonly) Person *person;

@property (nonatomic, readonly) NSString *nameText;
@property (nonatomic, readonly) NSString *birthdateText;

@end
</code></pre><p>View Modelçš„å†…éƒ¨å®ç°æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code>@implementation PersonViewModel

- (instancetype)initWithPerson:(Person *)person {
    self = [super init];
    if (!self) return nil;

    _person = person;
    if (person.salutation.length &gt; 0) {
        _nameText = [NSString stringWithFormat:@&quot;%@ %@ %@&quot;, self.person.salutation, self.person.firstName, self.person.lastName];
    } else {
        _nameText = [NSString stringWithFormat:@&quot;%@ %@&quot;, self.person.firstName, self.person.lastName];
    }

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@&quot;EEEE MMMM d, yyyy&quot;];
    _birthdateText = [dateFormatter stringFromDate:person.birthdate];

    return self;
}

@end
</code></pre><p>åŸæœ¬åœ¨<code>viewDidLoad</code>ä¸­çš„å±•ç¤ºé€»è¾‘ï¼Œè¢«ç§»åˆ°View Modelä¸­ã€‚ç°åœ¨çš„<code>viewDidLoad</code>éå¸¸ç®€æ´ğŸ˜ï¼š</p>
<pre><code>- (void)viewDidLoad {
    [super viewDidLoad];

    self.nameLabel.text = self.viewModel.nameText;
    self.birthdateLabel.text = self.viewModel.birthdateText;
}
</code></pre><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œç›¸å¯¹äºåŸæ¥çš„MVCå¹¶æ²¡æœ‰å¤§å˜åŒ–ï¼Œè¿˜æ˜¯åŸæ¥çš„ä»£ç ï¼Œåªæ˜¯å±•ç¤ºé€»è¾‘è¢«æ”¾ç½®åˆ°View Modelã€‚<br>MVVMä¸MVCæ˜¯å…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ‰æœºä¼šå°†åŸæœ‰çš„é¡¹ç›®ä»MVCæ¨¡å¼ï¼Œä¸€ç‚¹ä¸€ç‚¹çš„è¿‡æ¸¡ä¸ºMVVMæ¨¡å¼ã€‚</p>
<p>å†çœ‹çœ‹æˆ‘ä»¬å¯ä»¥å¤šä¹ˆè½»æ¾çš„å†™æµ‹è¯•ä»£ç ï¼š</p>
<pre><code>SpecBegin(Person)
    NSString *salutation = @&quot;Dr.&quot;;
    NSString *firstName = @&quot;first&quot;;
    NSString *lastName = @&quot;last&quot;;
    NSDate *birthdate = [NSDate dateWithTimeIntervalSince1970:0];

    it (@&quot;should use the salutation available. &quot;, ^{
        Person *person = [[Person alloc] initWithSalutation:salutation firstName:firstName lastName:lastName birthdate:birthdate];
        PersonViewModel *viewModel = [[PersonViewModel alloc] initWithPerson:person];
        expect(viewModel.nameText).to.equal(@&quot;Dr. first last&quot;);
    });

    it (@&quot;should not use an unavailable salutation. &quot;, ^{
        Person *person = [[Person alloc] initWithSalutation:nil firstName:firstName lastName:lastName birthdate:birthdate];
        PersonViewModel *viewModel = [[PersonViewModel alloc] initWithPerson:person];
        expect(viewModel.nameText).to.equal(@&quot;first last&quot;);
    });

    it (@&quot;should use the correct date format. &quot;, ^{
        Person *person = [[Person alloc] initWithSalutation:nil firstName:firstName lastName:lastName birthdate:birthdate];
        PersonViewModel *viewModel = [[PersonViewModel alloc] initWithPerson:person];
        expect(viewModel.birthdateText).to.equal(@&quot;Thursday January 1, 1970&quot;);
    });
SpecEnd
</code></pre><p>é€šè¿‡ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨MVVMçš„ä»£ä»·æ˜¯æˆ‘ä»¬çš„ä»£ç é‡ä¼šè½»å¾®å¢åŠ ï¼Œä½†å¥½å¤„æ˜¯é™ä½äº†ç¨‹åºçš„å¤æ‚æ€§ã€‚è¿™æ˜¯ä¸€ç¬”å¾ˆåˆ’ç®—çš„äº¤æ˜“ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨å¼€æºé¡¹ç›®<a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">ReactiveCocoa</a>æˆ–è€…<a href="https://github.com/ReactiveX/RxSwift" target="_blank" rel="external">RxSwift</a>æ¥ååŠ©ä½ å®è·µMVVMæ¨¡å¼ï¼Œå®ƒä»¬çš„ç»‘å®šæœºåˆ¶èƒ½å¸¦ç»™ä½ å¾ˆå¤šçš„ä¾¿åˆ©(å­¦ä¹ æ›²çº¿æ¯”è¾ƒé™¡)ã€‚å½“ç„¶ï¼Œä½¿ç”¨ReactiveCocoaæˆ–è€…RxSwiftéƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œä½ å®Œå…¨å¯ä»¥ä¸ç”¨ä»»ä½•æ¡†æ¶æ¥å®è·µMVVMã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html" target="_blank" rel="external">https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html</a></li>
<li><a href="https://www.objc.io/issues/13-architecture/mvvm/" target="_blank" rel="external">https://www.objc.io/issues/13-architecture/mvvm/</a></li>
<li><a href="http://www.teehanlax.com/blog/model-view-viewmodel-for-ios/" target="_blank" rel="external">http://www.teehanlax.com/blog/model-view-viewmodel-for-ios/</a></li>
<li><a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">https://github.com/ReactiveCocoa/ReactiveCocoa</a></li>
<li><a href="https://github.com/ReactiveX/RxSwift" target="_blank" rel="external">https://github.com/ReactiveX/RxSwift</a></li>
<li><a href="https://en.wikipedia.org/wiki/Modelâ€“viewâ€“viewmodel" target="_blank" rel="external">https://en.wikipedia.org/wiki/Modelâ€“viewâ€“viewmodel</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/MVVM/" rel="tag"># MVVM</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/09/iOS/å»é™¤UITableViewåˆ†éš”çº¿çš„å·¦è¾¹è·/" rel="next" title="å»é™¤UITableViewåˆ†éš”çº¿çš„å·¦è¾¹è·">
                <i class="fa fa-chevron-left"></i> å»é™¤UITableViewåˆ†éš”çº¿çš„å·¦è¾¹è·
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/28/iOS/iOS-å¼ºåˆ¶æ›´æ–°æœºåˆ¶/" rel="prev" title="iOS å¼ºåˆ¶æ›´æ–°æœºåˆ¶">
                iOS å¼ºåˆ¶æ›´æ–°æœºåˆ¶ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Ãœbersicht
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="ZhouJiatao" />
          <p class="site-author-name" itemprop="name">ZhouJiatao</p>
          <p class="site-description motion-element" itemprop="description">Write simple code</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">Kategorien</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">Tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ"><span class="nav-number">1.</span> <span class="nav-text">åœ¨iOSä¸­å“ªäº›ç»„ä»¶åˆ†åˆ«ä¸Mã€Vã€Cå¯¹åº”ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Massive-View-Controller"><span class="nav-number">2.</span> <span class="nav-text">Massive View Controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Model-View-ViewModel"><span class="nav-number">3.</span> <span class="nav-text">Model-View-ViewModel</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhouJiatao</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  

  


</body>
</html>
